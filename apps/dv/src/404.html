<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Diamond Vape - Loyalty Program</title>
    <script type="text/javascript">
      // Universal SPA routing for GitHub Pages and custom domains
      // This script handles routing for all deployment scenarios

      // Get the current path
      var path = window.location.pathname;
      var search = window.location.search;
      var hash = window.location.hash;

      // Check if we're on GitHub Pages subdirectory
      var isGitHubPages = window.location.hostname.includes("github.io");

      if (isGitHubPages) {
        // For GitHub Pages, use the original SPA redirect logic
        var pathSegmentsToKeep = 1;
        var l = window.location;
        var currentPath = l.pathname
          .slice(1)
          .split("/")
          .slice(pathSegmentsToKeep)
          .join("/");

        // Define valid routes
        var validRoutes = [
          "/",
          "/dashboard",
          "/admin",
          "/auth/login",
          "/auth/signup",
          "/home",
          "/test",
        ];
        var isValidRoute =
          validRoutes.includes("/" + currentPath) ||
          currentPath.startsWith("auth/") ||
          currentPath.startsWith("dashboard") ||
          currentPath.startsWith("admin");

        if (isValidRoute) {
          l.replace(
            l.protocol +
              "//" +
              l.hostname +
              (l.port ? ":" + l.port : "") +
              l.pathname
                .split("/")
                .slice(0, 1 + pathSegmentsToKeep)
                .join("/") +
              "/?/" +
              l.pathname
                .slice(1)
                .split("/")
                .slice(pathSegmentsToKeep)
                .join("/")
                .replace(/&/g, "~and~") +
              (l.search ? "&" + l.search.slice(1).replace(/&/g, "~and~") : "") +
              l.hash
          );
        } else {
          l.replace(
            l.protocol +
              "//" +
              l.hostname +
              (l.port ? ":" + l.port : "") +
              l.pathname
                .split("/")
                .slice(0, 1 + pathSegmentsToKeep)
                .join("/") +
              "/?/404"
          );
        }
      } else {
        // For custom domains, redirect to the main page and let React Router handle it
        // This works because the server will serve index.html for all routes
        window.location.replace("/");
      }
    </script>
  </head>
  <body>
    <div
      style="
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      "
    >
      <div style="text-align: center">
        <h1>Redirecting...</h1>
        <p>Please wait while we redirect you to the correct page.</p>
      </div>
    </div>
  </body>
</html>
